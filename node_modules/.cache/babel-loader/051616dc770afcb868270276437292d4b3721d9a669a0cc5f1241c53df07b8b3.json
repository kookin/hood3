{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ListBasicTreeViewDU = void 0;\nconst persistent_merkle_tree_1 = require(\"@chainsafe/persistent-merkle-tree\");\nconst arrayBasic_1 = require(\"./arrayBasic\");\nclass ListBasicTreeViewDU extends arrayBasic_1.ArrayBasicTreeViewDU {\n  constructor(type, _rootNode, cache) {\n    super(type, _rootNode, cache);\n    this.type = type;\n    this._rootNode = _rootNode;\n  }\n  /**\n   * Adds one value element at the end of the array and adds 1 to the un-commited ViewDU length\n   */\n  push(value) {\n    if (this._length >= this.type.limit) {\n      throw Error(\"Error pushing over limit\");\n    }\n    // Mutate length before .set()\n    this.dirtyLength = true;\n    const index = this._length++;\n    // If in new node..\n    if (index % this.type.itemsPerChunk === 0) {\n      // Set a zero node to the nodes array to avoid a navigation downwards in .set()\n      const chunkIndex = Math.floor(index / this.type.itemsPerChunk);\n      this.nodes[chunkIndex] = persistent_merkle_tree_1.zeroNode(0);\n    }\n    this.set(index, value);\n  }\n}\nexports.ListBasicTreeViewDU = ListBasicTreeViewDU;","map":{"version":3,"names":["persistent_merkle_tree_1","require","arrayBasic_1","ListBasicTreeViewDU","ArrayBasicTreeViewDU","constructor","type","_rootNode","cache","push","value","_length","limit","Error","dirtyLength","index","itemsPerChunk","chunkIndex","Math","floor","nodes","zeroNode","set","exports"],"sources":["../../src/viewDU/listBasic.ts"],"sourcesContent":[null],"mappings":";;;;;;AAAA,MAAAA,wBAAA,GAAAC,OAAA;AAIA,MAAAC,YAAA,GAAAD,OAAA;AAEA,MAAaE,mBAA4D,SAAQD,YAAA,CAAAE,oBAAiC;EAChHC,YAAqBC,IAAgC,EAAYC,SAAe,EAAEC,KAAiC;IACjH,KAAK,CAACF,IAAI,EAAEC,SAAS,EAAEC,KAAK,CAAC;IADV,KAAAF,IAAI,GAAJA,IAAI;IAAwC,KAAAC,SAAS,GAATA,SAAS;EAE1E;EAEA;;;EAGAE,IAAIA,CAACC,KAA2B;IAC9B,IAAI,IAAI,CAACC,OAAO,IAAI,IAAI,CAACL,IAAI,CAACM,KAAK,EAAE;MACnC,MAAMC,KAAK,CAAC,0BAA0B,CAAC;;IAGzC;IACA,IAAI,CAACC,WAAW,GAAG,IAAI;IACvB,MAAMC,KAAK,GAAG,IAAI,CAACJ,OAAO,EAAE;IAE5B;IACA,IAAII,KAAK,GAAG,IAAI,CAACT,IAAI,CAACU,aAAa,KAAK,CAAC,EAAE;MACzC;MACA,MAAMC,UAAU,GAAGC,IAAI,CAACC,KAAK,CAACJ,KAAK,GAAG,IAAI,CAACT,IAAI,CAACU,aAAa,CAAC;MAC9D,IAAI,CAACI,KAAK,CAACH,UAAU,CAAC,GAAGjB,wBAAA,CAAAqB,QAAQ,CAAC,CAAC,CAAa;;IAGlD,IAAI,CAACC,GAAG,CAACP,KAAK,EAAEL,KAAK,CAAC;EACxB;;AAzBFa,OAAA,CAAApB,mBAAA,GAAAA,mBAAA"},"metadata":{},"sourceType":"script","externalDependencies":[]}